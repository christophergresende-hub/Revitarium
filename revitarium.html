<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Revitarium ‚Äî Full App</title>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --bg:#04141a; --card:#071822; --accent:#00f0ff; --accent-2:#00a6ff;
      --muted:#98a6ad; --radius:18px; --gap:18px; --glass-border: rgba(0,180,255,0.08);
      --text:#dbeef6;
    }
    *{box-sizing:border-box}
    html,body{height:100%;}
    body{
      margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: radial-gradient(ellipse at 30% 10%, rgba(0,50,70,0.18), transparent 10%),
                  linear-gradient(180deg,#042028 0%,#021217 80%);
      color:var(--text); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    /* App layout */
    .app{display:flex;min-height:100vh}

    /* Sidebar */
    .sidebar{width:72px;background:linear-gradient(180deg,rgba(6,20,22,0.85),rgba(4,12,14,0.9));padding:18px 8px;display:flex;flex-direction:column;align-items:center;gap:12px}
    .brand{width:44px;height:44px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:transparent;color:var(--accent);font-weight:700}
    .nav-btn{width:44px;height:44px;border-radius:10px;display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,0.8);cursor:pointer;border:1px solid rgba(255,255,255,0.02)}
    .nav-btn.active,.nav-btn:hover{background:rgba(0,224,255,0.06);color:var(--accent-2);transform:translateX(4px)}

    /* Main area */
    .main{flex:1;padding:20px}
    .topbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .page-title{font-size:28px;font-weight:700}
    .controls{display:flex;gap:12px;align-items:center}
    .btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021217;border:none;padding:8px 14px;border-radius:14px;font-weight:700;cursor:pointer}
    .btn.ghost{background:rgba(255,255,255,0.03);color:var(--text);border:1px solid rgba(255,255,255,0.04)}

    /* Grid */
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:880px){.grid{grid-template-columns:1fr 380px}}

    /* Card */
    .card{background:linear-gradient(180deg,rgba(0,8,12,0.45),rgba(0,0,0,0.44));border-radius:var(--radius);border:1px solid var(--glass-border);padding:18px;box-shadow:0 14px 40px rgba(0,0,0,0.6);position:relative;overflow:hidden}
    .card h3{margin:0 0 12px 0;color:var(--accent);font-size:20px}
    canvas{width:100%;height:220px;display:block}

    /* Lists */
    .list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}
    .list li{background:linear-gradient(180deg,rgba(0,0,0,0.12),rgba(255,255,255,0.01));padding:10px 12px;border-radius:10px;color:var(--text);border:1px solid rgba(255,255,255,0.02)}

    /* Forms */
    input[type=text],input[type=password]{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);color:var(--text)}

    /* Login card (centered) */
    .login-wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:30px}
    .login-card{width:100%;max-width:420px;padding:36px;border-radius:20px;border:1px solid var(--glass-border);background:linear-gradient(180deg,rgba(0,0,0,0.3),rgba(0,0,0,0.45));box-shadow:0 30px 80px rgba(0,0,0,0.7)}
    .brand-title{font-size:44px;color:var(--accent);text-align:center;margin:0 0 18px 0}
    .login-card button{width:100%;padding:16px;border-radius:14px;font-size:18px}

    .spacer{height:60px}
  </style>
</head>
<body>

<!-- Single-file app contains both login and dashboard. Save as revitarium.html in repo root -->

<!-- LOGIN view (index-like) -->
<section id="loginView" class="login-wrap" aria-hidden="false">
  <div class="login-card card">
    <h1 class="brand-title">Revitarium</h1>
    <form id="loginForm">
      <label class="small">Usu√°rio</label>
      <input id="user" type="text" placeholder="Digite seu usu√°rio" autocomplete="username" />
      <div style="height:12px"></div>
      <label class="small">Senha</label>
      <input id="pass" type="password" placeholder="Digite sua senha" autocomplete="current-password" />
      <div style="height:18px"></div>
      <button class="btn" type="submit">Entrar</button>
    </form>
  </div>
</section>

<!-- DASHBOARD view -->
<div id="app" class="app" style="display:none">
  <aside class="sidebar">
    <div class="brand">R</div>
    <div class="nav-btn active" data-nav="dashboard">üè†</div>
    <div class="nav-btn" data-nav="reports">üìà</div>
    <div class="nav-btn" data-nav="users">üë•</div>
    <div class="nav-btn" data-nav="settings">‚öôÔ∏è</div>
    <div style="flex:1"></div>
    <div class="nav-btn" id="logoutBtn">‚§¥Ô∏è</div>
  </aside>

  <main class="main">
    <div class="topbar">
      <div style="display:flex;gap:12px;align-items:center">
        <div class="page-title">Dashboard</div>
        <div style="color:var(--muted);font-size:14px">Revitarium</div>
      </div>
      <div class="controls">
        <button id="exportCsv" class="btn">Exportar CSV</button>
        <label style="display:flex;align-items:center;gap:8px;color:var(--muted)"><input id="autoRefresh" type="checkbox"/> Auto-refresh</label>
      </div>
    </div>

    <div class="grid">
      <div>
        <section class="card">
          <h3>Visitas (√∫ltimos 7 dias)</h3>
          <canvas id="visitsChart" aria-label="Gr√°fico de visitas"></canvas>
        </section>

        <section class="card" style="margin-top:16px">
          <h3>Convers√µes</h3>
          <canvas id="conversionsChart" aria-label="Gr√°fico de convers√µes"></canvas>
        </section>

        <section class="card" style="margin-top:16px">
          <h3>Resumo</h3>
          <ul class="list">
            <li>Total de usu√°rios: <strong id="statUsers">-</strong></li>
            <li>Total de sess√µes: <strong id="statSessions">-</strong></li>
            <li>Taxa convers√£o: <strong id="statConversion">-</strong></li>
          </ul>
        </section>
      </div>

      <aside>
        <section class="card">
          <h3>√öltimas a√ß√µes</h3>
          <div style="display:flex;gap:8px;margin-bottom:12px">
            <button id="addActionBtn" class="btn ghost">Adicionar a√ß√£o</button>
            <button id="clearActions" class="btn ghost">Limpar</button>
          </div>
          <ul id="recentActions" class="list"></ul>
        </section>

        <section class="card" style="margin-top:16px">
          <h3>Atividades pendentes</h3>
          <form id="todoForm" style="display:flex;gap:8px;align-items:center">
            <input id="todoInput" placeholder="Nova tarefa..." />
            <button class="btn ghost" type="submit">Adicionar</button>
          </form>
          <ul id="todoList" class="list" style="margin-top:12px"></ul>
        </section>

        <section class="card" style="margin-top:16px">
          <h3>Usu√°rios</h3>
          <form id="userForm" style="display:flex;flex-direction:column;gap:8px">
            <input id="userName" placeholder="Nome" />
            <input id="userRole" placeholder="Cargo/Role" />
            <div style="display:flex;gap:8px"><button class="btn" type="submit">Adicionar</button></div>
          </form>
          <ul id="usersList" class="list" style="margin-top:12px"></ul>
        </section>
      </aside>
    </div>

    <div class="spacer"></div>
  </main>
</div>

<script>
// --- Login + routing ---
(function(){
  const loginView = document.getElementById('loginView');
  const app = document.getElementById('app');
  const loginForm = document.getElementById('loginForm');

  // If user already logged, show dashboard
  if(localStorage.getItem('rev_user') === 'ok'){
    loginView.style.display='none'; app.style.display='flex'; initApp();
  }

  // Simple credentials: admin / 123  (change below if needed)
  const validUser = 'admin';
  const validPass = '123';

  loginForm.addEventListener('submit', function(e){
    e.preventDefault();
    const u = document.getElementById('user').value.trim();
    const p = document.getElementById('pass').value.trim();
    if(!u||!p){ alert('Preencha todos os campos'); return; }
    if(u === validUser && p === validPass){
      localStorage.setItem('rev_user','ok');
      loginView.style.display='none'; app.style.display='flex'; initApp();
    } else {
      alert('Usu√°rio ou senha incorretos');
    }
  });

  // Expose a function to force logout
  window.revitariumLogout = function(){ localStorage.removeItem('rev_user'); window.location.reload(); }
})();

// --- Dashboard app logic ---
function initApp(){
  const visitsCtxEl = document.getElementById('visitsChart');
  const convCtxEl = document.getElementById('conversionsChart');
  const recentActions = document.getElementById('recentActions');
  const todoForm = document.getElementById('todoForm');
  const todoInput = document.getElementById('todoInput');
  const todoList = document.getElementById('todoList');
  const userForm = document.getElementById('userForm');
  const usersList = document.getElementById('usersList');
  const exportBtn = document.getElementById('exportCsv');
  const addActionBtn = document.getElementById('addActionBtn');
  const autoRefresh = document.getElementById('autoRefresh');
  const statUsers = document.getElementById('statUsers');
  const statSessions = document.getElementById('statSessions');
  const statConversion = document.getElementById('statConversion');
  const logoutBtn = document.getElementById('logoutBtn');
  const clearActions = document.getElementById('clearActions');

  // Mock data
  let visitsData = [120,150,180,140,210,230,200];
  let conversionsData = [12,20,15,18,30,28,22];
  let usersTotal = 124; let sessionsTotal = 987;

  function updateStats(){
    statUsers.textContent = usersTotal; statSessions.textContent = sessionsTotal;
    const convSum = conversionsData.reduce((a,b)=>a+b,0); const visitsSum = visitsData.reduce((a,b)=>a+b,0)||1;
    statConversion.textContent = Math.round((convSum/visitsSum)*100) + '%';
  }
  updateStats();

  function createGradient(ctx, c1, c2){ const h = ctx.canvas.height; const g = ctx.createLinearGradient(0,0,0,h); g.addColorStop(0,c1); g.addColorStop(1,c2); return g; }

  // Charts
  let visitsChart=null, convChart=null;
  function createCharts(){
    if(visitsCtxEl){ const ctx = visitsCtxEl.getContext('2d'); const bg = createGradient(ctx,'rgba(0,224,255,0.12)','rgba(0,163,255,0.03)'); if(visitsChart) visitsChart.destroy(); visitsChart = new Chart(ctx,{
      type:'line', data:{ labels:['6d','5d','4d','3d','2d','1d','Hoje'], datasets:[{ label:'Visitas', data:visitsData, fill:true, backgroundColor:bg, borderColor:'#00e0ff', tension:0.36, pointRadius:3, borderWidth:2 }] }, options:{ responsive:true, maintainAspectRatio:false, plugins:{legend:{display:false}}, scales:{ x:{ ticks:{color:'rgba(255,255,255,0.55)'} }, y:{ ticks:{color:'rgba(255,255,255,0.45)'} } } }
    }); }

    if(convCtxEl){ const ctx2 = convCtxEl.getContext('2d'); if(convChart) convChart.destroy(); convChart = new Chart(ctx2,{ type:'bar', data:{ labels:['6d','5d','4d','3d','2d','1d','Hoje'], datasets:[{ label:'Convers√µes', data:conversionsData, backgroundColor:'#00d2ff', borderRadius:6, barThickness:20 }] }, options:{ responsive:true, maintainAspectRatio:false, plugins:{legend:{display:false}}, scales:{ x:{ ticks:{color:'rgba(255,255,255,0.6)'} }, y:{ ticks:{color:'rgba(255,255,255,0.45)'} } } } }); }
  }
  createCharts(); window.addEventListener('resize', ()=>createCharts());

  // lists helpers
  function addListItem(el,text){ const li=document.createElement('li'); li.textContent=text; el.prepend(li); }
  ['Item C','Item B','Item A'].forEach(t=>addListItem(recentActions,t)); ['Tarefa 2','Tarefa 1'].forEach(t=>addListItem(todoList,t)); ['Admin (Owner)'].forEach(u=>addListItem(usersList,u));

  addActionBtn?.addEventListener('click', ()=>{ addListItem(recentActions, `A√ß√£o adicionada em ${new Date().toLocaleTimeString()}`); });
  clearActions?.addEventListener('click', ()=>{ recentActions.innerHTML=''; });

  todoForm?.addEventListener('submit',(e)=>{ e.preventDefault(); const v=(todoInput.value||'').trim(); if(!v) return; addListItem(todoList,v); todoInput.value=''; });
  userForm?.addEventListener('submit',(e)=>{ e.preventDefault(); const name=(document.getElementById('userName').value||'').trim(); const role=(document.getElementById('userRole').value||'').trim(); if(!name) return; addListItem(usersList, `${name}${role? ' ('+role+')':''}`); usersTotal++; updateStats(); document.getElementById('userName').value=''; document.getElementById('userRole').value=''; });

  exportBtn?.addEventListener('click', ()=>{ const rows=[['dia','visitas','conversoes'], ...visitsData.map((v,i)=>[i+1,v,conversionsData[i]||0])]; const csv=rows.map(r=>r.join(',')).join('\n'); const blob=new Blob([csv],{type:'text/csv'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='revitarium-data.csv'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url); });

  let autoInterval=null;
  autoRefresh?.addEventListener('change', function(){ if(this.checked){ autoInterval=setInterval(()=>{
      visitsData.push(Math.round(130+Math.random()*120)); visitsData.shift(); conversionsData.push(Math.round(8+Math.random()*25)); conversionsData.shift(); if(visitsChart){ visitsChart.data.datasets[0].data=visitsData; visitsChart.update(); } if(convChart){ convChart.data.datasets[0].data=conversionsData; convChart.update(); } sessionsTotal+=Math.round(Math.random()*10); updateStats(); },4500);
    } else { clearInterval(autoInterval); autoInterval=null; } });

  logoutBtn?.addEventListener('click', ()=>{ localStorage.removeItem('rev_user'); window.location.href=''; });
}
</script>
</body>
</html>
