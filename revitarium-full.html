<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Revitarium ‚Äî Full App (Login + Dashboard)</title>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --bg:#04141a; --card:#071822; --accent:#00f0ff; --accent-2:#00a6ff;
      --muted:#98a6ad; --text:#dbeef6; --glass-border: rgba(0,180,255,0.08);
      --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:var(--text);background:
      radial-gradient(ellipse at 30% 10%, rgba(0,50,70,0.18), transparent 10%),
      linear-gradient(180deg,#042028 0%,#021217 80%);-webkit-font-smoothing:antialiased}
    a{color:inherit;text-decoration:none}

    /* ---------- Layout ---------- */
    .app-root{min-height:100vh;display:flex;align-items:stretch;}
    /* Sidebar */
    .sidebar{width:72px;background:linear-gradient(180deg,rgba(6,20,22,0.8),rgba(4,12,14,0.85));padding:12px;display:flex;flex-direction:column;align-items:center;gap:12px;
      border-right:1px solid rgba(255,255,255,0.02);position:sticky;top:0;height:100vh}
    .brand-img{width:44px;height:44px;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:linear-gradient(90deg,var(--accent),var(--accent-2));box-shadow:0 8px 30px rgba(0,160,255,0.12)}
    .nav-btn{width:46px;height:46px;border-radius:10px;display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,0.9);cursor:pointer;border:1px solid rgba(255,255,255,0.02)}
    .nav-btn.active{background:rgba(0,224,255,0.06);transform:translateX(4px);color:var(--accent-2);box-shadow:0 6px 18px rgba(0,160,255,0.06)}

    /* Main */
    .main {flex:1;padding:20px 18px;overflow:auto}
    .topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
    .page-title{font-size:28px;font-weight:700}
    .controls{display:flex;gap:12px;align-items:center}

    /* Buttons */
    .btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021217;font-weight:700;border:none;padding:8px 14px;border-radius:14px;cursor:pointer}
    .btn.ghost{background:rgba(255,255,255,0.03);color:var(--text);border:1px solid rgba(255,255,255,0.04)}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.02)}

    /* Grid */
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:880px){.grid{grid-template-columns:1fr 360px}}
    .card{background:linear-gradient(180deg, rgba(0,8,12,0.45), rgba(0,0,0,0.44));padding:18px;border-radius:var(--radius);border:1px solid var(--glass-border);box-shadow:0 14px 40px rgba(0,0,0,0.6);overflow:hidden}
    .card h3{margin:0 0 12px;color:var(--accent);font-size:18px}
    .card canvas{width:100%;height:220px;display:block}

    ul.list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}
    ul.list li{background:linear-gradient(180deg, rgba(0,0,0,0.12), rgba(255,255,255,0.01));padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}

    /* Login view */
    .login-wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
    .login-card{width:100%;max-width:420px;padding:36px;border-radius:20px;background:linear-gradient(180deg, rgba(0,0,0,0.4), rgba(0,0,0,0.55));border:1px solid var(--glass-border);box-shadow:0 20px 60px rgba(0,0,0,0.7)}
    .login-card h1{margin:0 0 20px;font-size:36px;text-align:center;color:var(--accent)}
    .form-row{margin-bottom:14px}
    input[type="text"], input[type="password"]{width:100%;padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);color:var(--text);font-size:15px}

    .center{display:flex;justify-content:center}

    /* Small screens adjustments */
    @media(max-width:480px){
      .page-title{font-size:22px}
      .card canvas{height:200px}
      .sidebar{display:flex;align-items:center}
    }

    /* Hidden utility */
    .hidden{display:none!important}
  </style>
</head>
<body>
  <!-- NOTE: local brand image path (uploaded file) -->
  <!-- Using local path as requested: /mnt/data/F9974E9A-F13C-4858-98C4-036D8C1E38E5.jpeg -->

  <!-- ===== App root (we show login or dashboard based on session) ===== -->
  <div id="loginView" class="login-wrap" aria-hidden="false">
    <div class="login-card" role="dialog" aria-label="Login Revitarium">
      <div class="brand center" style="margin-bottom:8px">
        <!-- local image used as brand -->
        <img src="/mnt/data/F9974E9A-F13C-4858-98C4-036D8C1E38E5.jpeg" alt="R" style="width:84px;height:84px;border-radius:12px;object-fit:cover;display:block;margin:0 auto 8px auto">
        <h1>Revitarium</h1>
      </div>

      <form id="loginForm" aria-label="form login">
        <div class="form-row">
          <label class="small">Usu√°rio</label>
          <input id="loginUser" type="text" placeholder="Digite seu usu√°rio" autocomplete="username" />
        </div>
        <div class="form-row">
          <label class="small">Senha</label>
          <input id="loginPass" type="password" placeholder="Digite sua senha" autocomplete="current-password" />
        </div>

        <div style="display:flex;gap:10px;align-items:center;justify-content:center;margin-top:10px">
          <button id="btnLogin" class="btn" type="submit">Entrar</button>
          <button id="btnDemo" type="button" class="btn ghost">Demo</button>
        </div>

        <p class="small center" style="margin-top:12px;color:var(--muted)">Credenciais padr√£o: <strong>admin / 123</strong></p>
      </form>
    </div>
  </div>

  <!-- Main SPA content (hidden until login) -->
  <div id="appRoot" class="app-root hidden" aria-hidden="true">
    <aside class="sidebar" role="navigation" aria-label="Barra lateral">
      <div class="brand-img" title="Revitarium">
        <img src="/mnt/data/F9974E9A-F13C-4858-98C4-036D8C1E38E5.jpeg" alt="logo" style="width:100%;height:100%;object-fit:cover">
      </div>
      <div class="nav-btn active" data-nav="dashboard" title="Dashboard">üè†</div>
      <div class="nav-btn" data-nav="reports" title="Relat√≥rios">üìà</div>
      <div class="nav-btn" data-nav="users" title="Usu√°rios">üë•</div>
      <div class="nav-btn" data-nav="settings" title="Configura√ß√µes">‚öôÔ∏è</div>
      <div style="flex:1"></div>
      <div class="nav-btn" id="btn-logout" title="Sair">‚§¥Ô∏è</div>
    </aside>

    <main class="main" role="main">
      <div class="topbar">
        <div style="display:flex;align-items:center;gap:12px">
          <div class="page-title">Dashboard</div>
        </div>

        <div class="controls">
          <button id="exportCsv" class="btn">Exportar CSV</button>
          <label style="display:flex;align-items:center;gap:8px;color:var(--muted)">
            <input id="autoRefresh" type="checkbox" /> <span style="margin-left:6px">Auto-refresh</span>
          </label>
        </div>
      </div>

      <div class="grid">
        <!-- left -->
        <div>
          <section class="card">
            <h3>Visitas (√∫ltimos 7 dias)</h3>
            <canvas id="visitsChart" aria-label="Gr√°fico de visitas"></canvas>
          </section>

          <section class="card" style="margin-top:12px">
            <h3>Convers√µes</h3>
            <canvas id="conversionsChart" aria-label="Gr√°fico de convers√µes"></canvas>
          </section>

          <section class="card" style="margin-top:12px">
            <h3>Resumo</h3>
            <ul class="list">
              <li>Total de usu√°rios: <strong id="statUsers">-</strong></li>
              <li>Total de sess√µes: <strong id="statSessions">-</strong></li>
              <li>Taxa convers√£o: <strong id="statConversion">-</strong></li>
            </ul>
          </section>
        </div>

        <!-- right -->
        <aside>
          <section class="card">
            <h3>√öltimas a√ß√µes</h3>
            <button class="btn ghost" id="addActionBtn">Adicionar a√ß√£o</button>
            <ul class="list" id="recentActions" style="margin-top:12px"></ul>
          </section>

          <section class="card" style="margin-top:12px">
            <h3>Atividades pendentes</h3>
            <form id="todoForm" style="display:flex;gap:8px;margin-top:8px">
              <input id="todoInput" type="text" placeholder="Nova tarefa..." />
              <button class="btn ghost" type="submit">Adicionar</button>
            </form>
            <ul class="list" id="todoList" style="margin-top:12px"></ul>
          </section>

          <section class="card" style="margin-top:12px">
            <h3>Usu√°rios</h3>
            <form id="userForm" style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
              <input id="userName" placeholder="Nome" />
              <input id="userRole" placeholder="Cargo/Role" />
              <div style="display:flex;gap:8px">
                <button class="btn" type="submit">Adicionar</button>
              </div>
            </form>
            <ul class="list" id="usersList" style="margin-top:12px"></ul>
          </section>
        </aside>
      </div>

      <div style="height:40px"></div>
    </main>
  </div>

  <!-- ===== Inline JS (single-file app) ===== -->
  <script>
    (function(){
      // Credentials (option A)
      const CRED_USER = 'admin';
      const CRED_PASS = '123';

      // Elements
      const loginView = document.getElementById('loginView');
      const appRoot = document.getElementById('appRoot');
      const loginForm = document.getElementById('loginForm');
      const loginUser = document.getElementById('loginUser');
      const loginPass = document.getElementById('loginPass');
      const btnDemo = document.getElementById('btnDemo');
      const btnLogout = document.getElementById('btn-logout');

      // Dashboard elements
      const visitsCanvas = document.getElementById('visitsChart');
      const convCanvas = document.getElementById('conversionsChart');
      const recentActions = document.getElementById('recentActions');
      const todoForm = document.getElementById('todoForm');
      const todoInput = document.getElementById('todoInput');
      const todoList = document.getElementById('todoList');
      const userForm = document.getElementById('userForm');
      const usersList = document.getElementById('usersList');
      const exportBtn = document.getElementById('exportCsv');
      const addActionBtn = document.getElementById('addActionBtn');
      const autoRefresh = document.getElementById('autoRefresh');
      const statUsers = document.getElementById('statUsers');
      const statSessions = document.getElementById('statSessions');
      const statConversion = document.getElementById('statConversion');

      // Mock data
      let visitsData = [120,150,180,140,210,230,200];
      let conversionsData = [12,20,15,18,30,28,22];
      let usersTotal = 124;
      let sessionsTotal = 987;

      // Session handling: if localStorage has rev_user, auto-login
      function checkSession(){
        const u = localStorage.getItem('rev_user');
        if(u){ showApp(); }
        else { showLogin(); }
      }

      function showLogin(){
        loginView.classList.remove('hidden'); loginView.setAttribute('aria-hidden','false');
        appRoot.classList.add('hidden'); appRoot.setAttribute('aria-hidden','true');
      }
      function showApp(){
        loginView.classList.add('hidden'); loginView.setAttribute('aria-hidden','true');
        appRoot.classList.remove('hidden'); appRoot.setAttribute('aria-hidden','false');
        // build charts and populate
        initDashboard();
      }

      // Login logic
      loginForm.addEventListener('submit', function(e){
        e.preventDefault();
        const u = (loginUser.value||'').trim();
        const p = (loginPass.value||'').trim();
        if(!u || !p){ alert('Preencha usu√°rio e senha'); return; }
        if(u === CRED_USER && p === CRED_PASS){
          localStorage.setItem('rev_user', u);
          showApp();
        } else {
          alert('Usu√°rio ou senha incorretos!');
        }
      });

      btnDemo.addEventListener('click', function(){
        loginUser.value = CRED_USER; loginPass.value = CRED_PASS;
        // simulate submit
        loginForm.dispatchEvent(new Event('submit', {cancelable:true, bubbles:true}));
      });

      btnLogout?.addEventListener('click', function(){
        localStorage.removeItem('rev_user'); showLogin();
      });

      // UI helpers
      function addListItem(el, text){
        const li = document.createElement('li');
        li.textContent = text;
        el.prepend(li);
      }

      // Charts
      let visitsChart = null, convChart = null;
      function createGradient(ctx, c1, c2){
        const g = ctx.createLinearGradient(0,0,0,ctx.canvas.height||220);
        g.addColorStop(0, c1); g.addColorStop(1, c2);
        return g;
      }
      function createCharts(){
        if(visitsCanvas){
          const ctx = visitsCanvas.getContext('2d');
          if(visitsChart) visitsChart.destroy();
          const bg = createGradient(ctx,'rgba(0,224,255,0.12)','rgba(0,163,255,0.02)');
          visitsChart = new Chart(ctx, {
            type:'line',
            data:{ labels:['6d','5d','4d','3d','2d','1d','Hoje'], datasets:[{label:'Visitas', data:visitsData, fill:true, backgroundColor:bg, borderColor:'#00e0ff', tension:0.36, pointRadius:3, borderWidth:2}]},
            options:{ responsive:true, maintainAspectRatio:false, plugins:{legend:{display:false}}, scales:{ x:{ticks:{color:'rgba(255,255,255,0.6)'}}, y:{ticks:{color:'rgba(255,255,255,0.6)'}} } }
          });
        }
        if(convCanvas){
          const ctx2 = convCanvas.getContext('2d');
          if(convChart) convChart.destroy();
          convChart = new Chart(ctx2, { type:'bar', data:{ labels:['6d','5d','4d','3d','2d','1d','Hoje'], datasets:[{label:'Convers√µes', data:conversionsData, backgroundColor:'#00d2ff', borderRadius:6, barThickness:20}] }, options:{ responsive:true, maintainAspectRatio:false, plugins:{legend:{display:false}}, scales:{ x:{ticks:{color:'rgba(255,255,255,0.6)'}}, y:{ticks:{color:'rgba(255,255,255,0.6)'}} } } });
        }
      }

      function updateStats(){
        statUsers.textContent = usersTotal;
        statSessions.textContent = sessionsTotal;
        const convRate = Math.round((conversionsData.reduce((a,b)=>a+b,0)/Math.max(1,visitsData.reduce((a,b)=>a+b,0)))*100);
        statConversion.textContent = convRate + '%';
      }

      // initialize dashboard content
      function initDashboard(){
        // only initialize once; but safe to re-create
        // populate lists
        recentActions.innerHTML=''; todoList.innerHTML=''; usersList.innerHTML='';
        ['Item C','Item B','Item A'].forEach(t=>addListItem(recentActions,t));
        ['Tarefa 2','Tarefa 1'].forEach(t=>addListItem(todoList,t));
        ['Admin (Owner)'].forEach(u=>addListItem(usersList,u));
        updateStats();
        createCharts();
        window.addEventListener('resize', ()=> { createCharts(); });
      }

      // Handlers: add actions, todos, users
      addActionBtn?.addEventListener('click',()=>{ addListItem(recentActions, `A√ß√£o adicionada ${new Date().toLocaleTimeString()}`); });
      todoForm?.addEventListener('submit',(e)=>{ e.preventDefault(); const v=(todoInput.value||'').trim(); if(!v) return; addListItem(todoList,v); todoInput.value=''; });
      userForm?.addEventListener('submit',(e)=>{ e.preventDefault(); const n=(document.getElementById('userName').value||'').trim(); const r=(document.getElementById('userRole').value||'').trim(); if(!n) return; addListItem(usersList, `${n}${r? ' ('+r+')':''}`); usersTotal++; updateStats(); document.getElementById('userName').value=''; document.getElementById('userRole').value=''; });

      // Export CSV
      exportBtn?.addEventListener('click', ()=>{
        const rows = [['dia','visitas','conversoes'], ...visitsData.map((v,i)=>[i+1,v,conversionsData[i]||0])];
        const csv = rows.map(r=>r.join(',')).join('\\n');
        const blob = new Blob([csv],{type:'text/csv'}); const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href = url; a.download = 'revitarium-data.csv'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
      });

      // Auto-refresh mock
      let autoInterval = null;
      autoRefresh?.addEventListener('change', function(){
        if(this.checked){
          autoInterval = setInterval(()=>{
            visitsData.push(Math.round(130 + Math.random()*120)); visitsData.shift();
            conversionsData.push(Math.round(8 + Math.random()*25)); conversionsData.shift();
            sessionsTotal += Math.round(Math.random()*10);
            if(visitsChart){ visitsChart.data.datasets[0].data = visitsData; visitsChart.update(); }
            if(convChart){ convChart.data.datasets[0].data = conversionsData; convChart.update(); }
            updateStats();
          }, 4000);
        } else { clearInterval(autoInterval); autoInterval=null; }
      });

      // small nav interactions
      document.querySelectorAll('.nav-btn').forEach(b=>{
        b.addEventListener('click', ()=> { document.querySelectorAll('.nav-btn').forEach(x=>x.classList.remove('active')); b.classList.add('active'); });
      });

      // keyboard shortcut (ctrl/cmd+e) -> export
      document.addEventListener('keydown', function(e){ if((e.ctrlKey||e.metaKey) && e.key==='e'){ exportBtn?.click(); } });

      // Start
      checkSession();
    })();
  </script>
</body>
</html>
